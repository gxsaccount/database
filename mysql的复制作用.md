### 1.实现在不同服务器上的数据分布  
  利用二进制日志增量
  在使用行复制时，带宽有压力，分批进行
### 2.实现数据读取的负载均衡  
   需要其他组件完成，如dns轮询方式，将程序的读连接到不同数据库
   或使用LVS、haproxy等代理方式
   
### 3.增加数据安全性  
    mysql的复制是非共享架构，同样的数据分布多台服务器上
    利用备库的备份来减少主库负载，
    但复制不能代替备份，因为复制和备份的工作不同，恢复依靠备份
### 4.避免数据库的高可用和故障切换， 
    如单点失败  
### 5.实现数据库在线升级  
    用一个版本较高的服务器作为主库备库，进行升级测试。

### 复制工作方式
    必须开启二进制文件  
    1.主将变更写入二进制文件  
    2.从读取主的二进制日志变更写到relay_log中  
        基于日志点复制和基于GTID复制  
    3.从服务器重放relay_log中的日志  
            
### 基于日志点复制
  基于日志点的复制需要对从库指定二进制日志的偏移量，如果偏移量（从库多时，由于每个从库日志独立，很难找到日志点）有差错，会导致同步后数据不一致的问题，并
且可能会报错而终止复制。
  
### 基于GTID复制
  MySQL 为事务生成的 ID，它是全局唯一的，即在整个集群中都是唯一的。从库会告诉主库已执行的事务的 GTID 值，主库会告诉从库哪些GTID 事务没有被执行。这一切  都是由 MySQL 维护进行的，因此能更好地保证主从数据的一致性。
  方便进行故障转移，从库不会丢失任何修改
  故障处理比较复杂（日志可以直接跳过，GTID需要插入空事务）
  对执行SQL有一定限制
   
mysql的复制拓扑
  一主多从：
      为不同业务使用不同从库，不同从库为业务可以创建不同存储引擎和索引。
      将一台从库放到远程IDC，用作灾备恢复。
      分担主库的读负载（分库分表）
   主主复制(不建议)：经常数据冲突，所以两个主所操作的表最好能够分开：auto_increment_increment=2，auto_increment_offset=1|2
   主备复制：一台提供服务，一台处于只读的热备使用，主出现故障或维护才会切换。
   主主拥有各自备库：主库带宽负荷大
   级联复制：主库，分发主库（减小主库的带宽负荷，分发给从库信息），从库
   
   优化：使用多线程复制
   
   复制常见问题处理：
      主从库意外宕机
      主库的二进制日志损坏
      备库的中继日志损坏
      从库被修改了（一定要read-only）
       不唯一的server_id
       
  ### 高可用：
  尽量缩短因日常维护操作和突发系统崩溃导致的停机时间
  
  ### 如何实现高可用：
  建立完善的监控及报警系统
  定时对备份恢复测试
  正确配置数据库（从服务器只读）
  对数据进行归档和清理（将innodb的数据归档到 压缩性号的存储引擎）
  增加系统冗余，保证不可用时可以尽快恢复。
       避免单点故障：1.SUN共享存储和DRDB磁盘复制（镜像，推荐） 2.利用多写集群或NDB集群 3.mysql的复制
       主从切换及故障转移：
  
    
 ### MMM
 监控主从复制健康情况
 
